(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3375],{41325:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Blogs/Detail",function(){return l(93119)}])},4442:function(e,t,l){"use strict";var i=l(11527),n=l(50959),a=l(5816),r=l(39171),s=l(19803),o=l.n(s),d=l(46283),c=l(45767),m=l(90484),u=l(3131),h=l(61015);let v=e=>{var t,l,s,v,x,p;let{user:f,isOwn:g=!1,setFollowStatus:j}=e,b=async()=>!!(0,u.bg)()&&(await (0,m.ZNR)({id:f.id,type:"user",isFollow:(null==f?void 0:f.is_followed)?0:1}),j({userId:f.id,status:!(null==f?void 0:f.is_followed)}),!0);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"pt-4 d-flex flex-column flex-md-row",children:[(0,i.jsxs)("div",{className:"d-flex flex-fill",children:[(0,i.jsx)("a",{href:null==f?void 0:f.url,children:(0,i.jsx)(d.Z,{className:"me-3",width:64,height:64,src:null==f?void 0:f.avatar_url,headdress:null==f?void 0:f.headdress_worn,"aria-hidden":"true"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("a",{href:"".concat(f.url),children:(0,i.jsxs)("h5",{className:"d-flex align-items-center text-body mb-1",children:[null==f?void 0:f.name,!!(null==f?void 0:null===(t=f.user_auth)||void 0===t?void 0:t.is_auth)&&(0,i.jsx)("div",{className:"ms-1",children:(null==f?void 0:null===(l=f.user_auth)||void 0===l?void 0:l.info)?(0,i.jsx)(a.Z,{placement:"top",overlay:(0,i.jsx)(r.Z,{id:"tooltip-top",children:null==f?void 0:null===(s=f.user_auth)||void 0===s?void 0:s.info}),children:(0,i.jsx)("i",{className:o()("me-1 fas fa-badge-check fs-5",(null==f?void 0:null===(v=f.user_auth)||void 0===v?void 0:v.type)===1?"text-info":"text-warning")})}):(0,i.jsx)("i",{className:o()("me-1 fas fa-badge-check",(null==f?void 0:null===(x=f.user_auth)||void 0===x?void 0:x.type)===1?"text-info":"text-warning")})})]})}),(0,i.jsxs)("div",{className:"text-secondary mb-2",children:[(0,i.jsxs)("span",{children:[(0,h.Ae)(f.rank)," 声望"]}),(0,i.jsx)("span",{className:"split-dot"}),(0,i.jsxs)("span",{children:[(0,h.Ae)(f.followers)," 粉丝"]}),null===(p=f.bindings_list)||void 0===p?void 0:p.map((e,t)=>(0,i.jsxs)(n.Fragment,{children:[0===t&&(0,i.jsx)("span",{className:"split-dot"}),(0,i.jsx)("a",{className:"text-secondary",href:e.url,target:"_blank",children:(0,i.jsx)("i",{className:o()("me-2 fab","fa-".concat(e.type))})})]},e.type))]}),(0,i.jsx)("div",{className:"text-truncate-2",dangerouslySetInnerHTML:{__html:null==f?void 0:f.excerpt}})]})]}),!g&&(0,i.jsx)("div",{className:"mt-sm-0 mt-3 d-flex align-items-start flex-shrink-0",children:(0,i.jsx)(c.Z,{className:"w-100",onClick:b,children:(null==f?void 0:f.is_followed)?"已关注":"关注作者"})})]})})};t.Z=n.memo(v)},53888:function(e,t,l){"use strict";var i=l(11527),n=l(50959);let a=()=>{let e=()=>{let e=window.scrollY,t=parseInt(String(e/50)),i=setInterval(()=>{(e-=t)<0?(window.scrollTo(0,0),clearInterval(i)):window.scrollTo(0,e)},3);l(0)},[t,l]=(0,n.useState)(0),a=()=>{l(window.scrollY)};return(0,n.useEffect)(()=>(window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)})),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{id:"fixedTools",className:"position-fixed d-none ".concat(t>720?"d-xl-flex":""),style:{right:"24px",bottom:"24px"},children:(0,i.jsx)("button",{type:"button",className:"btn btn-light",title:"回顶部",onClick:e,children:"▲"})})})};t.Z=a},1335:function(e,t,l){"use strict";var i=l(11527),n=l(17438),a=l.n(n);l(50959);var r=l(50694),s=l(95804),o=l(37708),d=l(80850),c=l(5907),m=l(46283),u=l(23878),h=l(90484);let v=e=>{var t,l;let{id:n,className:a="",data:v,source:x}=e,p=(0,c.I0)(),f=()=>{p({type:"article"===x?"articleDetail/getQuoted":"question/getQuoted",payload:{object_id:n,size:15,page:v.rows.length<15?1:v.page+1}})},g=e=>{u.ZP.confirm({title:"删除引用",content:"确认要删除么？",onSuccess:()=>{(0,h.F3D)(e).then(()=>{p({type:"article"===x?"articleDetail/deleteOneQuoted":"question/deleteOneQuoted",payload:e})})}})};return(null==v?void 0:null===(t=v.rows)||void 0===t?void 0:t.length)?(0,i.jsxs)(r.Z,{className:a,children:[(0,i.jsx)(r.Z.Header,{className:"bg-transparent border-0",children:(0,i.jsxs)("strong",{children:["被 ",v.total," 篇内容引用"]})}),(0,i.jsx)(s.Z,{variant:"flush",className:"quote border-bottom-0",as:"ul",children:null==v?void 0:null===(l=v.rows)||void 0===l?void 0:l.map(e=>{var t,l,n,a,r;return(0,i.jsxs)(o.Z,{action:!0,as:"li",className:"d-flex align-items-center border-0",children:[(0,i.jsxs)("a",{href:"".concat(e.object.url,"?utm_source=sf-backlinks"),className:"d-flex align-items-center",children:[(0,i.jsx)(m.Z,{src:null===(t=e.object)||void 0===t?void 0:null===(l=t.user)||void 0===l?void 0:l.avatar_url,headdress:null===(n=e.object)||void 0===n?void 0:null===(a=n.user)||void 0===a?void 0:a.headdress_worn,alt:"头像",width:24,height:24,className:"me-2"}),(0,i.jsx)("div",{className:"me-2 text-body",children:e.object.title}),(e.object.answers>0||e.object.comments>0)&&(0,i.jsxs)("span",{className:"ms-1 me-2 font-size-14 flex-shrink-0",children:[(0,i.jsx)("i",{className:"far fa-message-lines text-primary me-1"}),(0,i.jsx)("span",{className:"text-primary",children:e.object.comments||e.object.answers})]})]}),(null===(r=e.actions.find(e=>"delete"===e.action))||void 0===r?void 0:r.action)&&(0,i.jsx)(d.Z,{variant:"link",className:"text-secondary btn-reset font-size-14 delete-quote ms-1 flex-shrink-0",onClick:t=>{t.preventDefault(),g(e.id)},children:"删除"})]},e.id)})}),v.page<v.total_page&&(0,i.jsx)(r.Z.Footer,{className:"bg-transparent d-flex justify-content-end",children:(0,i.jsx)(d.Z,{variant:"link",onClick:e=>{e.preventDefault(),f()},className:"font-size-14 btn-reset",children:"展开更多"})})]}):null},x=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a(),{id:"e7ade88cc0ab8362",children:".quote .delete-quote{visibility:hidden}.quote .list-group-item:hover .delete-quote{visibility:visible}"})}),p=e=>(0,i.jsxs)(i.Fragment,{children:[x,(0,i.jsx)(v,{...e})]});t.Z=p},93119:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSP:function(){return ew},default:function(){return ey}});var i=l(11527),n=l(17438),a=l.n(n),r=l(50959),s=l(93058),o=l(42368),d=l(842),c=l(59089),m=l(54312),u=l(5907),h=l(82691),v=l.n(h),x=l(93134),p=l(32242),f=l(71384),g=l.n(f);let j=e=>{var t,l,n,a,r,s,o;let{id:d,extra:m,status:u,sessionUser:h={}}=e;return(0,i.jsxs)(i.Fragment,{children:["rejected"===u&&(0,i.jsxs)(c.Z,{className:"mb-3",variant:"warning",children:[(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:m.reason}}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"你可以"}),(0,i.jsx)("a",{href:"/a/".concat(d,"/edit"),children:" 再次编辑 "}),(0,i.jsx)("span",{children:"以重新发表"})]})]}),(0,i.jsx)("div",{className:"mt-3",children:"注意：如果该内容"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"连续 3 次发表未通过"}),(0,i.jsx)("li",{children:"发表未成功一周内未做任何改动"})]}),(0,i.jsx)("div",{className:"mt-3",children:"都将被系统自动删除，如有必要，请做好备份。"})]}),"deleted"===u&&(0,i.jsxs)(c.Z,{className:"mb-3",variant:"warning",children:[(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:m.reason}}),(null==m?void 0:m.operator)&&(0,i.jsxs)("div",{children:["操作者：",(0,i.jsx)("a",{href:null==m?void 0:null===(t=m.operator)||void 0===t?void 0:t.url,children:null==m?void 0:null===(l=m.operator)||void 0===l?void 0:l.name})]})]}),"hidden"===u&&(null==h?void 0:null===(n=h.roles)||void 0===n?void 0:n.is_editor)&&(0,i.jsxs)(c.Z,{className:"mb-3",variant:"warning",children:[(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:m.reason}}),(null==m?void 0:m.operator)?(0,i.jsxs)("div",{children:["操作者：",(0,i.jsx)("a",{href:null==m?void 0:null===(a=m.operator)||void 0===a?void 0:a.url,children:null==m?void 0:null===(r=m.operator)||void 0===r?void 0:r.name})]}):""]}),"locked"===u&&(0,i.jsxs)(c.Z,{className:"mb-3",variant:"warning",children:[(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:m.reason}}),(0,i.jsxs)("div",{children:["操作者：",(0,i.jsx)("a",{href:null==m?void 0:null===(s=m.operator)||void 0===s?void 0:s.url,children:null==m?void 0:null===(o=m.operator)||void 0===o?void 0:o.name}),(0,i.jsx)("br",{}),"操作者时间：",g().unix(null==m?void 0:m.operator_time).format("YYYY-MM-DD HH:mm")]})]})]})};var b=l(50694),w=l(4442),y=l(5816),N=l(39171),_=l(23878),k=l(57439),Z=l(61015);let S=e=>{let{realRed:t=0,read:l=0,created:n=0,modified:a=0,id:r,actions:s=[],initPage:o,isEditor:d,memberActions:c}=e,m=()=>{Z.Am.hide()},u=(e,t)=>{switch(t){case"report":_.ZP.confirm({content:"string"==typeof e?e:"举报成功"});break;case"hide-setting":case"delete":(0,Z.Am)("string"==typeof e?e:""),null==o||o();break;case"reject":m(),null==o||o();break;default:"string"==typeof e&&(0,Z.Am)("string"==typeof e?e:""),null==o||o()}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"text-secondary font-size-14 mb-4 d-flex flex-wrap justify-content-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:["阅读 ",(0,Z.Ae)(l),d&&t>0&&"（UV ".concat((0,Z.Ae)(t),"）")]}),(0,i.jsx)("span",{className:"split-dot"}),n!==a&&a>n?(0,i.jsx)(y.Z,{placement:"top",overlay:(0,i.jsxs)(N.Z,{id:"tip-top",children:["发布于 ",(0,i.jsx)("span",{children:(0,Z.dq)(n)})]}),children:(0,i.jsx)("a",{href:"/a/".concat(r,"/revision"),className:"text-secondary",children:(0,i.jsxs)("time",{dateTime:g().unix(n).toISOString(),itemProp:"datePublished",children:["更新于 ",(0,Z.dq)(a)]})})}):(0,i.jsx)("a",{href:"/a/".concat(r,"/revision"),className:"text-secondary",children:(0,i.jsxs)("time",{dateTime:g().unix(n).toISOString(),itemProp:"datePublished",children:["发布于 ",(0,Z.dq)(n)]})})]}),(0,i.jsx)("div",{className:"operation text-end",children:(0,i.jsx)(k.Z,{id:r,actions:s,type:"article",onCallBack:u,member_actions:c})})]})})},A=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a(),{id:"986f121867ae534",children:".operation .dropdown-toggle::after{display:none}"})}),E=e=>(0,i.jsxs)(i.Fragment,{children:[A,(0,i.jsx)(S,{...e})]});var q=r.memo(E),F=l(48562);let T=e=>{let{tags:t=[],className:l="",site:n,isSite:a=!1,source:r=""}=e,s=(null==t?void 0:t.length)>0?(0,i.jsx)("div",{className:"d-flex flex-wrap align-items-center ".concat(l),children:(0,i.jsxs)("div",{className:"m-n1 d-flex flex-wrap align-items-center",children:[!a&&(null==n?void 0:n.thumbnail_url)&&(0,i.jsx)("a",{className:"m-1",href:n.url,target:"_blank",children:(0,i.jsx)("img",{src:n.thumbnail_url,alt:n.name,width:"24",height:"24",style:{borderRadius:"0.1875rem",verticalAlign:"top"}})}),t.map(e=>(0,i.jsx)(F.Z,{data:e,source:r},e.id))]})}):null;return s};var z=r.memo(T);let H=e=>{let{originUrl:t="",type:l}=e;return(0,i.jsx)("div",{className:"bg-light my-4 p-3",children:(0,i.jsxs)("a",{className:"d-flex align-items-center text-body",href:t,target:"_blank",rel:"nofollow",children:[(0,i.jsx)("div",{className:"d-flex align-items-center bg-secondary justify-content-center me-3 rounded px-3",style:{width:"48px",height:"48px"},children:(0,i.jsx)("i",{className:"far fa-file-lines fa-lg text-white"})}),(0,i.jsxs)("div",{className:"media-body w-100",children:[(0,i.jsx)("div",{className:"text-body mb-0 fw-bold",children:(0,i.jsxs)("span",{style:{color:"#000"},children:["本文系",2===l?"转载":"翻译","，阅读原文"]})}),(0,i.jsx)("div",{className:"font-size-13 text-secondary text-truncate-1 w-75",children:(0,i.jsx)("small",{style:{wordBreak:"break-word"},children:t})})]})]})})};var O=r.memo(H),I=l(80850);let D=e=>{let{visible:t,payUrl:l}=e;return t?(0,i.jsxs)(c.Z,{variant:"warning",className:"mb-4",children:[(0,i.jsx)("p",{children:"还差一步，支付后即可公开展示。"}),(0,i.jsx)("div",{children:(0,i.jsx)(I.Z,{variant:"danger",href:l,children:"支付 ￥100"})})]}):null};var P=r.memo(D),L=l(90484),C=l(21438),M=l(16857),U=l(38640),B=l(2401),R=l(19803),Y=l.n(R);let J=e=>{var t,l,n;let{detail:a,actionData:s,actions:o,initPage:d,imageUrl:c,isEditor:m,isAuthor:h,memberActions:v,articleHtml:f,payInfo:j,isBaiduOxApp:y=!1,visibleActions:N=!0}=e,[_,k]=(0,r.useState)((0,u.jU)()?"":"https://static.segmentfault.com/main_site_next/d778cb88"),Z=(0,r.useRef)(0),{article:S,description:A,site:E,prev_article:F,next_article:T}=a,[H,I]=(0,r.useState)(!1),[D,R]=(0,r.useState)((0,u.jU)()?(null===(t=document.querySelector(".article.fmt"))||void 0===t?void 0:t.innerHTML)||(null==S?void 0:S.parsed_text):f),J=(0,C.zG)(D),Q=(0,r.useRef)(),W=(0,u.I0)();(0,u.jU)()&&!H&&(window.articleHtml=(null===(n=document.querySelector(".article.fmt"))||void 0===n?void 0:n.innerHTML)||""),(0,r.useEffect)(()=>{if(D){if(Q.current instanceof HTMLElement){let e=null==Q?void 0:Q.current.getElementsByTagName("a"),t=e.length;for(let l=0;l<t;l++)e[l].target="_blank"}}else{let e=(0,B.Z)();e.errorEvent({eventName:"articleContent"}),(0,L.mxb)({aid:S.id,pure:1}).then(e=>{W({type:"articleDetail/saveArticleHtml",payload:{id:S.id,parsed_text:null==e?void 0:e.parsed_text}}),R(null==e?void 0:e.parsed_text)})}},[D]),(0,r.useEffect)(()=>{I(!0),k(window.publicPath||""),W({type:"articleDetail/saveArticleHtml",payload:{id:S.id,parsed_text:window.articleHtml}});let e=document.querySelector(".blog-header");Z.current=(null==e?void 0:e.clientHeight)||0},[]),(0,r.useEffect)(()=>{(null==S?void 0:S.parsed_text)&&R(S.parsed_text)},[null==S?void 0:S.parsed_text]),(0,r.useEffect)(()=>{if(D){let e=document.querySelectorAll("#article-nav-list a");if(e.length>0){let e=document.querySelector("#article-nav-list");e&&(e.innerHTML="")}new M.k(document.querySelector("#article-nav-list"),document.querySelector("article.article-content"),()=>{var e,t;let l=[],i=document.querySelectorAll("#article-nav-list a");for(let e=0;e<i.length;e++){let t=i[e].getAttribute("href")||"";l.push(t)}l.length&&(null==i||null===(e=i[0])||void 0===e||e.classList.add("text-primary"),null==i||null===(t=i[0])||void 0===t||t.classList.remove("link-secondary"),window.addEventListener("scroll",()=>(0,U.Z)(l,Z.current)))})}return()=>{window.removeEventListener("scroll",()=>(0,U.Z)(""))}},[D]),(0,r.useEffect)(()=>{J&&Q&&Q.current&&D&&J.run(Q.current)},[J,Q,D]);let G=e=>{W({type:"articleDetail/followAuthor",payload:{id:null==S?void 0:S.id,is_followed:e.status}})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.ql,{children:[(0,i.jsx)("meta",{name:"twitter:card",content:c?"summary_large_image":"summary"}),(0,i.jsx)("meta",{name:"twitter:image",content:c?"https://segmentfault.com".concat(c):"".concat(_,"touch-icon.png")}),(0,i.jsx)("meta",{name:"twitter:site",content:"@segment_fault"}),(0,i.jsx)("meta",{name:"twitter:creator",content:"@segmentfault"}),(0,i.jsx)("meta",{name:"twitter:title",content:null==S?void 0:S.title}),(0,i.jsx)("meta",{name:"og:type",content:"article"}),(0,i.jsx)("meta",{name:"og:image",content:c?"https://segmentfault.com".concat(c):"".concat(_,"touch-icon.png")}),(0,i.jsx)("meta",{name:"og:title",content:null==S?void 0:S.title}),(0,i.jsx)("meta",{name:"og:description",content:A}),(0,i.jsx)("meta",{name:"og:url",content:"https://segmentfault.com/a/".concat(null==S?void 0:S.id)}),(0,i.jsx)("meta",{name:"og:site_name",content:"SegmentFault 思否"}),(0,i.jsx)("meta",{name:"msvalidate.01",content:"2C018C53297C8388F3E7052F5E9CA6AF"}),(0,i.jsx)("meta",{name:"event-object",value:'{"current": ["article", ["'.concat(null==S?void 0:S.id,'"]], "root": ["article", "').concat(null==S?void 0:S.id,'"]}'),id:"SFEventObject"}),(0,i.jsx)("link",{rel:"canonical",href:"https://segmentfault.com/a/".concat(null==S?void 0:S.id)}),(0,i.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:'{\n            "@context": "https://schema.org",\n            "@type": "Article",\n            "mainEntityOfPage": {\n              "@type": "WebPage",\n              "@id": "https://google.com/article"\n            },\n            "name": '.concat(JSON.stringify((null==S?void 0:S.title)||""),',\n            "headline": ').concat(JSON.stringify((null==S?void 0:S.title)||""),',\n            "image": "').concat((null==S?void 0:S.cover)?null==S?void 0:S.cover:c||"".concat(_,"touch-icon.png"),'",\n            "datePublished": "').concat(g().unix(null==S?void 0:S.created).toISOString(),'",\n            "dateModified": "').concat(g().unix((null==S?void 0:S.created)>(null==S?void 0:S.modified)?null==S?void 0:S.created:null==S?void 0:S.modified).toISOString(),'",\n            "url": "https://segmentfault.com/a/').concat(null==S?void 0:S.id,'",\n            "author": {\n              "@type": "Person",\n              "name": ').concat(JSON.stringify(null==S?void 0:null===(l=S.user)||void 0===l?void 0:l.name),'\n            },\n            "publisher": {\n              "@type": "Organization",\n              "name": "SegmentFault",\n              "logo": {\n                "@type": "ImageObject",\n                "url":\n                  "https://assets.segmentfault.com/v-5fc4b0b2/global/img/static/touch-icon.png"\n              }\n            }\n          }')}})]}),(0,i.jsxs)("div",{children:[(null==S?void 0:S.cover)&&(0,i.jsx)("div",{className:"ratio ratio-21x9 mb-4",children:(0,i.jsx)(b.Z.Img,{variant:"top",src:null==S?void 0:S.cover,className:"w-100 h-100",alt:"头图"})}),(0,i.jsx)(x.Z,{name:"25"}),(0,i.jsx)(P,{visible:(null==j?void 0:j.paid)===!1,payUrl:null==j?void 0:j.pay_url,id:null==S?void 0:S.id}),(0,i.jsx)("article",{className:"article fmt article-content ",dangerouslySetInnerHTML:{__html:D},ref:Q}),!y&&(0,i.jsx)(z,{tags:null==S?void 0:S.tags,isSite:!1,site:E}),(null==S?void 0:S.article_type)>1&&(0,i.jsx)(O,{originUrl:null==S?void 0:S.origin_url,type:null==S?void 0:S.article_type}),(0,i.jsx)(x.Z,{name:"3",className:"mt-4"}),N&&(0,i.jsx)(p.Z,{id:null==S?void 0:S.id,title:null==S?void 0:S.title,actionData:{...s},className:"my-4 py-3",banner:null==S?void 0:S.cover,isAuthor:h,mode:"btnGroup",source:"article"}),(0,i.jsx)(q,{realRed:null==S?void 0:S.real_unique_views,read:null==S?void 0:S.real_views,created:null==S?void 0:S.created,modified:null==S?void 0:S.modified,id:null==S?void 0:S.id,actions:o,initPage:d,isEditor:m,memberActions:v}),!y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("hr",{className:"mb-0 bg-black bg-opacity-50"}),(0,i.jsx)(w.Z,{user:S.user,isOwn:h,setFollowStatus:G}),(0,i.jsx)("hr",{className:"mb-4 bg-black bg-opacity-50"})]}),(F||T)&&(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsxs)("div",{className:Y()("w-50",!F&&"invisible"),children:[(0,i.jsx)("div",{className:"text-secondary",children:"\xab 上一篇"}),(0,i.jsx)("a",{className:"text-truncate-1",href:null==F?void 0:F.url,children:null==F?void 0:F.title})]}),(0,i.jsxs)("div",{className:Y()("d-flex flex-column align-items-end w-50",!T&&"invisible"),children:[(0,i.jsx)("div",{className:"text-secondary",children:"下一篇 \xbb"}),(0,i.jsx)("a",{className:"text-truncate-1",href:null==T?void 0:T.url,children:null==T?void 0:T.title})]})]})]})]})};var Q=r.memo(J);l(41279);var W=l(84985),G=l.n(W),V=l(37079);g().locale("zh-cn"),g().extend(G());let X=e=>{var t,l,n,a,r;let{title:s,user:o,id:d,created:c,modified:m,initPage:u,actions:h,member_actions:v,lang:x,langs:p,ipAddress:f="",readTime:j}=e,b=()=>{(null==h?void 0:h.find(e=>"recommend"===e.action))?(0,L.U6L)(d).then(()=>{(0,Z.Am)("推荐已提交，等待审核"),u()}):(0,L.AVM)(d).then(()=>{u()})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{className:"h2 mb-3",children:(0,i.jsx)("a",{href:"/a/".concat(d),className:"text-body",children:s})}),(0,i.jsx)("div",{className:"d-flex flex-wrap mb-4",children:(0,i.jsxs)("div",{className:"d-flex align-items-center font-size-14",children:[(0,i.jsx)(V.Z,{user:o}),(()=>{let e=(0,i.jsxs)("a",{href:"/a/".concat(d,"/revision"),className:"text-secondary font-size-14 ms-2 ps-1",children:[(0,i.jsx)("time",{dateTime:g().unix(c).toISOString(),itemProp:"datePublished",children:(0,Z.dq)(c)}),f&&(0,i.jsxs)("span",{children:[" ",f]})]});return c!==m&&m>c?(0,i.jsx)(y.Z,{placement:"top",overlay:(0,i.jsx)(N.Z,{id:"top",children:(0,i.jsxs)("span",{className:"",children:["更新于 ",(0,Z.dq)(m)]})}),children:e}):e})(),(0,i.jsxs)("div",{className:"ms-3 d-flex align-items-baseline text-secondary",children:[(0,i.jsx)("i",{className:"far fa-book-open"}),(0,i.jsxs)("span",{className:"ms-1",children:["阅读 ",j," 分钟"]})]}),(null===(t=null==v?void 0:v.find(e=>"edit"===e.action))||void 0===t?void 0:t.name)?(0,i.jsx)("a",{href:"/a/".concat(d,"/edit"),className:"ms-3",children:"编辑"}):null,(null===(l=null==h?void 0:h.find(e=>"recommend"===e.action))||void 0===l?void 0:l.name)||(null===(n=null==h?void 0:h.find(e=>"cancel-recommend"===e.action))||void 0===n?void 0:n.name)?(0,i.jsx)(I.Z,{variant:"link",className:"ms-3 btn-reset",onClick:e=>{e.preventDefault(),b()},children:(null===(a=null==h?void 0:h.find(e=>"recommend"===e.action))||void 0===a?void 0:a.name)||(null===(r=null==h?void 0:h.find(e=>"cancel-recommend"===e.action))||void 0===r?void 0:r.name)}):null,(null==p?void 0:p.length)>0&&(0,i.jsxs)("a",{href:"en"===x?"/a/".concat(d):"/a/".concat(d,"/en"),className:"d-flex align-items-center ms-3 lh-1",children:[(0,i.jsx)("i",{className:"far fa-language"}),(0,i.jsx)("span",{className:"ms-1",children:"en"===x?"中文":"English"})]})]})})]})};var $=l(53888),K=l(26534),ee=l(1335),et=l(95804),el=l(37708),ei=l(46283),en=l(87816);let ea=e=>{var t;let{data:l}=e,n=()=>{new en.Z("aa_rdArticles_click").clickEvent()};return(0,i.jsxs)(el.Z,{href:"".concat(null==l?void 0:l.url,"?utm_source=sf-similar-article"),className:Y()("d-flex align-items-center border-0"),action:!0,active:!1,onClick:n,children:[(0,i.jsx)(ei.Z,{src:l.user.avatar_url,width:38,height:38}),(0,i.jsxs)("div",{className:"ms-3",children:[(0,i.jsx)("h6",{className:"mb-1 text-break text-body fw-bold",children:null==l?void 0:l.title}),(0,i.jsxs)("p",{className:"d-flex align-items-center font-size-14 mb-0",children:[(0,i.jsx)("span",{className:"text-secondary",children:null==l?void 0:null===(t=l.user)||void 0===t?void 0:t.name}),(null==l?void 0:l.votes)>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"split-dot"}),(0,i.jsxs)("span",{className:Y()("text-secondary"),children:["赞 ",(0,Z.Ae)(null==l?void 0:l.votes)]})]}),(null==l?void 0:l.views)>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"split-dot"}),(0,i.jsxs)("span",{className:"text-secondary",children:["阅读 ",(0,Z.Ae)(null==l?void 0:l.views)]})]}),(null==l?void 0:l.comments)>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"split-dot"}),(0,i.jsxs)("span",{className:"text-secondary",children:["评论 ",(0,Z.Ae)(null==l?void 0:l.comments)]})]})]})]})]})};var er=r.memo(ea);let es=e=>{let{title:t,list:l=[],className:n=""}=e;return l.length?(0,i.jsxs)(b.Z,{className:n,children:[(0,i.jsx)(b.Z.Header,{className:"bg-transparent border-bottom-0",children:(0,i.jsx)("strong",{children:t})}),(0,i.jsx)(et.Z,{variant:"flush",children:l.map((e,t)=>(0,i.jsx)(er,{data:e},"".concat(e.id).concat(t)))})]}):null},eo=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a(),{id:"a71179a83a8815ea",children:".recommend-list-wrap .card-header{-webkit-box-shadow:0rem -.06rem 0rem 0rem rgba(0,0,0,.13)inset;-moz-box-shadow:0rem -.06rem 0rem 0rem rgba(0,0,0,.13)inset;box-shadow:0rem -.06rem 0rem 0rem rgba(0,0,0,.13)inset}.mr-13{margin-right:13px}"})}),ed=e=>(0,i.jsxs)(i.Fragment,{children:[eo,(0,i.jsx)(es,{...e})]});var ec=(0,r.memo)(ed);let em=e=>{let{className:t=""}=e;return(0,i.jsx)("div",{id:"collapseTarget",className:Y()("d-none ps-3 border-start w-100",t),children:(0,i.jsx)(et.Z,{variant:"flush",id:"article-nav-list",className:"font-size-14 w-100"})})},eu=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a(),{id:"80ca17bf1a64be8",children:".nav-header{cursor:pointer}#collapseTarget{max-height:360px;overflow-y:auto}"})}),eh=e=>(0,i.jsxs)(i.Fragment,{children:[eu,(0,i.jsx)(em,{...e})]});var ev=r.memo(eh),ex=l(57118),ep=l(2504);let ef=new Z.i8,eg=e=>{var t,l,n;let{artDetail:a,action:h,match:f,dispatch:g,sessionUser:b,articleRelated:w,isBaiduOxApp:y=!1,quotedData:N,articleRecommendationList:k}=e,S=(0,u.k6)(),A=(0,r.useRef)(null),E=eg.articleHtml;eg.articleHtml=null,A.current=null==b?void 0:null===(t=b.user)||void 0===t?void 0:t.id;let{params:{aid:q,lang:F=null}}=f,{article:T={},actions:z,extra:H,member_actions:O,description:I,keywords:D,pay_info:P,title:L,blog:C}=a[q]||{};v()(C);let{is_editor:M}=(null==b?void 0:b.roles)||{},U=Number(null==T?void 0:null===(l=T.user)||void 0===l?void 0:l.id)===(null==b?void 0:null===(n=b.user)||void 0===n?void 0:n.id),[B,R]=(0,r.useState)(!1),[Y,J]=(0,r.useState)(""),[W,G]=(0,r.useState)(0),V=(0,Z.sA)();(0,r.useEffect)(()=>{new en.Z("aa_detailsPage_view",{type:"pageEvent"});let e=document.querySelector(".blog-header");e&&G(e.clientHeight)},[]),(0,r.useEffect)(()=>{v()(a[q])&&g({type:"articleDetail/getArtDetail",payload:{aid:q,lang:F,wh:1},callback:e=>{"error"===e&&S.replace("/404")}})},[q]),(0,r.useEffect)(()=>{if(null==T?void 0:T.tags){var e;let t=null==T?void 0:T.tags.map(e=>e.name),l=null==t?void 0:t.join(",");(0,ex.Z)(l,null==b?void 0:null===(e=b.user)||void 0===e?void 0:e.rank)}},[null==T?void 0:T.tags]);let et=()=>{g({type:"articleDetail/getArtDetail",payload:{aid:q,lang:F,isRefresh:!1,wh:1},callback:()=>{}})};(0,r.useEffect)(()=>{let e=(0,Z.Wz)(window.location.href,"openShare");R("true"===e),(0,ep.j)("article")},[]),(0,r.useEffect)(()=>{if(!v()(T)){g({type:"global/saveTitle",payload:{title:L,titleAlias:null==T?void 0:T.title}}),g({type:"global/pushPageUser",payload:{pathName:window.location.pathname,users:[T.user]}}),g({type:"global/saveHeadOptions",payload:{keywords:D,description:I}});let e=document.querySelector(".article.fmt");if(setTimeout(()=>{ef.render(e)},1e3),window.onresize=()=>{if(document.body.clientWidth<576){var e;null===(e=document.querySelector("#first-ad"))||void 0===e||e.classList.remove("data-fix")}},document.body.clientWidth<576){let e=document.querySelectorAll("article.article img")||[];e.forEach(e=>{e.onchange=e=>{let t=e.currentTarget,l=t.getAttribute("src"),i=t.getAttribute("data-src"),n="";if(!(l=i||l))return;let a=l.indexOf("?");a>0&&(n=l.substring(a),l=l.substring(0,a)),l.match(/^\/img\//)&&!l.match(/\/view$/)&&(l=l+"/view"+n,t.setAttribute(i?"data-src":"src",l),t.setAttribute("data-src",l))}})}let t=document.querySelector("article.article img");if(t){let e=t.getAttribute("src"),l=t.getAttribute("data-src");(e=l||e)&&!(null==e?void 0:e.includes("http"))&&(e="".concat(window.location.origin).concat(e)),J(e||"")}}el(),v()(w)&&g({type:"articleDetail/getRelated",payload:q})},[T.id]);let el=()=>{var e;let t=(null===(e=document.getElementById("second-ad"))||void 0===e?void 0:e.getBoundingClientRect().bottom)||0,l=document.documentElement.scrollTop||document.body.scrollTop;l&&t<0&&window.scrollTo(0,l+1)};return a[q]?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{children:"\n          html {\n            scroll-behavior: unset !important;\n            scroll-padding-top: ".concat(W+20,"px;\n          }\n        ")}),(0,i.jsx)("div",{className:"bg-white d-none d-xl-flex justify-content-center",children:(0,i.jsx)(x.Z,{name:"2"})}),(0,i.jsx)("div",{className:"bg-white py-5",children:(0,i.jsxs)(s.Z,{className:"pt-3 pt-sm-0 article-wrap",children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(d.Z,{lg:7,className:"mx-auto",children:(0,i.jsx)(X,{title:null==T?void 0:T.title,user:null==T?void 0:T.user,id:null==T?void 0:T.id,created:null==T?void 0:T.created,modified:null==T?void 0:T.modified,initPage:et,actions:z,member_actions:O,langs:null==T?void 0:T.langs,lang:F,ipAddress:null==T?void 0:T.ip_address,readTime:null==T?void 0:T.read_time})})}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(d.Z,{lg:2,className:"d-none d-lg-flex justify-content-end align-items-start",children:(0,i.jsx)(p.Z,{id:null==T?void 0:T.id,actionData:{...h[q]},title:null==T?void 0:T.title,showShare:B,banner:(null==T?void 0:T.cover)||Y,isAuthor:U,source:"article",className:"mt-0",top:20+W,bottomBoundary:".article-content"})}),(0,i.jsxs)(d.Z,{lg:7,className:"mx-auto",children:[(null==T?void 0:T.status_key)&&(null==H?void 0:H.reason)&&(0,i.jsx)(j,{id:q,extra:H,sessionUser:b,status:null==T?void 0:T.status_key}),(null==T?void 0:T.status_key)==="deleted"&&!(null==H?void 0:H.reason)&&(0,i.jsx)(c.Z,{className:"mb-3",variant:"warning",children:(0,i.jsx)("span",{children:"这篇文章已被删除"})}),(0,i.jsx)(Q,{detail:a[q],articleHtml:E,actionData:h[q],actions:z,initPage:et,imageUrl:T.cover,isEditor:M,isAuthor:U,memberActions:O,payInfo:P,isBaiduOxApp:y}),v()(b)&&(0,i.jsx)(_.Js,{})]}),(0,i.jsx)(d.Z,{lg:2,className:"d-none d-lg-block",children:(0,i.jsxs)(m.Z,{enable:!0,top:20+W,bottomBoundary:".article-wrap",children:[(0,i.jsx)(ev,{className:"mb-4"}),(0,i.jsx)(x.Z,{name:"1"})]})})]}),(0,i.jsx)($.Z,{}),(0,i.jsx)("div",{className:"d-block d-sm-none fix-bottom-action-wrap",children:(0,i.jsx)(p.Z,{id:null==T?void 0:T.id,actionData:{...h[q]},title:null==T?void 0:T.title,showShare:B,banner:(null==T?void 0:T.cover)||Y,isAuthor:U,source:"article",mode:"fixBottom"})})]})}),(0,i.jsx)(s.Z,{className:"py-5",children:(0,i.jsx)(o.Z,{children:(0,i.jsxs)(d.Z,{lg:7,className:"mx-auto",children:[(0,i.jsx)("h3",{className:"text-center mb-4",children:"引用和评论"}),(0,i.jsx)(ee.Z,{className:"mb-4",data:N,id:q,source:"article"}),(0,i.jsx)(ec,{title:"推荐阅读",className:"mb-4",list:k}),(0,i.jsx)(K.Z,{id:q,eventObject:V,user:T.user,isFetchComments:T.comments>0})]})})})]}):null};eg.articleHtml=null;let ej=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a(),{id:"9cb70f41b3d6a2e1",children:".article-content{margin-bottom:1.5rem}.article-content .userExcerpt p{margin-bottom:0!important}.article-content .col-md-90{width:120px}.article-content pre{position:relative}.right-side .right-block{margin-bottom:1.5rem}#article-header{border-top:2px solid#00965e}@media(max-width:767.98px){.article-content .col-md-90{width:100%}}@media(max-width:575.98px){.article-content.container{padding:0;padding-bottom:56px;padding-bottom:-webkit-calc(56px + constant(safe-area-inset-bottom));padding-bottom:-moz-calc(56px + constant(safe-area-inset-bottom));padding-bottom:calc(56px + constant(safe-area-inset-bottom));padding-bottom:-webkit-calc(56px + env(safe-area-inset-bottom));padding-bottom:-moz-calc(56px + env(safe-area-inset-bottom));padding-bottom:calc(56px + env(safe-area-inset-bottom));overflow-x:hidden}}"}),(0,i.jsx)(a(),{id:"ce2346a4ac7d50cb",children:'@charset "UTF-8";.fmt,.tui-editor-contents,.preview-wrap{line-height:1.6}.fmt p,.fmt address,.fmt ul,.fmt ol,.fmt dl,.fmt pre,.fmt blockquote,.fmt table,.fmt figure,.fmt hr,.tui-editor-contents p,.tui-editor-contents address,.tui-editor-contents ul,.tui-editor-contents ol,.tui-editor-contents dl,.tui-editor-contents pre,.tui-editor-contents blockquote,.tui-editor-contents table,.tui-editor-contents figure,.tui-editor-contents hr,.preview-wrap p,.preview-wrap address,.preview-wrap ul,.preview-wrap ol,.preview-wrap dl,.preview-wrap pre,.preview-wrap blockquote,.preview-wrap table,.preview-wrap figure,.preview-wrap hr{margin-bottom:1.25rem}.fmt p,.tui-editor-contents p,.preview-wrap p{word-wrap:break-word;word-break:break-all}.fmt ol ol,.fmt ol ul,.fmt ul ol,.fmt ul ul,.tui-editor-contents ol ol,.tui-editor-contents ol ul,.tui-editor-contents ul ol,.tui-editor-contents ul ul,.preview-wrap ol ol,.preview-wrap ol ul,.preview-wrap ul ol,.preview-wrap ul ul{margin-bottom:0}.fmt li>p:last-of-type,.tui-editor-contents li>p:last-of-type,.preview-wrap li>p:last-of-type{margin-bottom:0!important}.fmt h1,.tui-editor-contents h1,.preview-wrap h1{font-size:2rem;margin:2.75rem 0 1rem;padding-bottom:.5rem;border-bottom:3px double rgba(0,0,0,.1)}.fmt h2,.tui-editor-contents h2,.preview-wrap h2{font-size:1.75rem;margin:2.5rem 0 1rem;padding-bottom:.5rem;border-bottom:1px double rgba(0,0,0,.1)}.fmt>h2:first-child,.tui-editor-contents>h2:first-child,.preview-wrap>h2:first-child{margin-top:0}.fmt h3,.tui-editor-contents h3,.preview-wrap h3{font-size:1.5rem;margin:2.25rem 0 1rem}.fmt h4,.tui-editor-contents h4,.preview-wrap h4{font-size:1.25rem;margin:2rem 0 1rem}.fmt h5,.tui-editor-contents h5,.preview-wrap h5{font-size:1rem;margin:1.75rem 0 1rem}.fmt h6,.tui-editor-contents h6,.preview-wrap h6{font-size:1rem;margin:1.5rem 0 .5rem}.fmt h6::before,.tui-editor-contents h6::before,.preview-wrap h6::before{content:"❐";margin-right:.25rem}.fmt blockquote,.tui-editor-contents blockquote,.preview-wrap blockquote{padding-left:1rem;border-left:.25rem solid#e9ecef}.fmt pre,.tui-editor-contents pre,.preview-wrap pre{padding:1rem;max-height:35rem;line-height:1.5;background-color:#e9ecef;overflow:auto}.fmt pre code,.tui-editor-contents pre code,.preview-wrap pre code{word-wrap:normal;overflow-wrap:normal;white-space:inherit}.fmt hr,.tui-editor-contents hr,.preview-wrap hr{margin:2rem auto;max-width:160px;border-top-width:1px;background-color:rgba(0,0,0,.5)}.fmt img,.tui-editor-contents img,.preview-wrap img{max-width:100%;height:auto}.fmt table,.tui-editor-contents table,.preview-wrap table{border:1px solid#dee2e6;width:100%;table-layout:fixed}.fmt table td,.fmt table th,.tui-editor-contents table td,.tui-editor-contents table th,.preview-wrap table td,.preview-wrap table th{padding:.75rem;border:1px solid#dee2e6;word-wrap:break-word}.fmt table [align="center"],.tui-editor-contents table [align="center"],.preview-wrap table [align="center"]{text-align:center}.fmt table [align="right"],.tui-editor-contents table [align="right"],.preview-wrap table [align="right"]{text-align:right}.fmt table thead th,.tui-editor-contents table thead th,.preview-wrap table thead th{border-bottom-width:2px;background-color:#e9ecef;color:#212529;font-weight:bold}.fmt table tbody tr:hover,.tui-editor-contents table tbody tr:hover,.preview-wrap table tbody tr:hover{background-color:rgba(0,0,0,.025)}.fmt .img-wrap,.tui-editor-contents .img-wrap,.preview-wrap .img-wrap{display:block;text-align:center}article.fmt a img{cursor:pointer}article.fmt img{cursor:-webkit-zoom-in;cursor:-moz-zoom-in;cursor:zoom-in}article.fmt p>img{display:block;margin:0 auto}'})]}),eb=e=>(0,i.jsxs)(i.Fragment,{children:[ej,(0,i.jsx)(eg,{...e})]});var ew=!0,ey=(0,u.$j)(e=>{let{articleDetail:t,action:l,global:i}=e;return{...t,action:l,sessionUser:i.sessionUser,isBaiduOxApp:i.isBaiduOxApp}})(eb)}},function(e){e.O(0,[4312,9706,7343,3345,6534,4156,9774,2888,179],function(){return e(e.s=41325)}),_N_E=e.O()}]);